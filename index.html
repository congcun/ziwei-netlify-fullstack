<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Á¥´ÂæÆÊñóÊï∞+ÈúçÂÖ∞Âæ∑ËÅå‰∏öÊµãËØï - ‰∏ì‰∏öÂ≠¶‰π†ÊñπÂêëÂàÜÊûê</title>
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxwYXRoIGQ9Ik0xNiA4TDE4LjUgMTNIMjRMMTkuNSAxN0wyMSAyMkwxNiAxOUwxMSAyMkwxMi41IDE3TDggMTNIMTMuNUwxNiA4WiIgZmlsbD0id2hpdGUiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQwX2xpbmVhcl8xXzEiIHgxPSIwIiB5MT0iMCIgeDI9IjMyIiB5Mj0iMzIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K" type="image/svg+xml">
    <style>
        /* === Á¥´ÂæÆÊñóÊï∞+ÈúçÂÖ∞Âæ∑ËÅå‰∏öÊµãËØïÊ†∑Âºè === */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            --info-gradient: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            --success-gradient: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            --light-gradient: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            --primary-color: #667eea;
            --secondary-color: #fab1a0;
            --dark-color: #2d3436;
            --light-color: #f8f9fa;
            --gray-color: #636e72;
            --border-radius: 16px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.97);
            border-radius: var(--border-radius);
            padding: 35px;
            box-shadow: var(--box-shadow);
            backdrop-filter: blur(8px);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--primary-gradient);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }
        
        .header {
            text-align: center;
            margin-bottom: 35px;
            position: relative;
            padding-bottom: 25px;
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: var(--primary-gradient);
            border-radius: 2px;
        }
        
        .header h1 {
            color: #2d3436;
            margin-bottom: 12px;
            font-size: 32px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .header p {
            color: var(--gray-color);
            font-size: 17px;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .card-title {
            color: #444;
            margin-bottom: 25px;
            font-size: 22px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(102, 126, 234, 0.2);
        }
        
        .form-section h2 {
            color: #444;
            margin-bottom: 20px;
            font-size: 20px;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: #2d3436;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-secondary:hover {
            box-shadow: 0 10px 20px rgba(255, 234, 167, 0.3);
        }
        
        .btn-full {
            width: 100% !important;
        }
        
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .loading.show {
            opacity: 1;
            visibility: visible;
            pointer-events: all;
        }
        
        .loading-content {
            text-align: center;
            max-width: 400px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.1);
        }
        
        .ai-loading-animation {
            position: relative;
            margin: 20px auto;
        }
        
        .ai-brain {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            margin: 0 auto 15px;
            position: relative;
            animation: aiPulse 2s ease-in-out infinite;
        }
        
        .ai-brain::before {
            content: 'üß†';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
        }
        
        .ai-dots {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
        }
        
        .ai-dot {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: aiDotWave 1.5s ease-in-out infinite;
        }
        
        .ai-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .ai-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes aiPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        
        @keyframes aiDotWave {
            0%, 60%, 100% { transform: scale(1); opacity: 0.4; }
            30% { transform: scale(1.2); opacity: 1; }
        }
        
        .loading-text {
            font-size: 16px;
            font-weight: 600;
            color: #2d3436;
            margin: 15px 0 5px;
        }
        
        .loading-subtitle {
            font-size: 14px;
            color: #636e72;
            line-height: 1.4;
        }
        
        .loading-progress {
            width: 100%;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            animation: loadingProgress 3s ease-in-out infinite;
        }
        
        @keyframes loadingProgress {
            0% { width: 10%; }
            50% { width: 80%; }
            100% { width: 95%; }
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .result-section {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            border: 2px solid #e1e5e9;
        }
        
        .result-section.show {
            display: block;
        }
        
        .result-section h3 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .result-content {
            /* ÂéªÈô§ÂÜÖÈÉ®ÁôΩËâ≤ËÉåÊôØÂíåËæπÊ°ÜÔºåÁõ¥Êé•Âú®Â§ñÂ±ÇÂç°ÁâáÂ±ïÁ§∫ */
            background: transparent;
            padding: 0;
            border-radius: 0;
            margin-bottom: 25px;
        }
        
        .result-content h4 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 600;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }
        
        .result-content p {
            line-height: 1.8;
            color: #2d3436;
            margin-bottom: 12px;
            font-size: 15px;
        }
        
        .recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .recommendation-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .recommendation-card h5 {
            color: #2d3436;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .recommendation-card .score {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 8px;
        }
        
        .recommendation-card p {
            font-size: 14px;
            color: #636e72;
            margin-bottom: 5px;
        }
        
        .holland-scores {
            margin-top: 15px;
        }
        
        .score-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 15px;
        }
        
        .score-label {
            min-width: 100px;
            font-weight: 600;
            color: #555;
        }
        
        .score-bar {
            flex: 1;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            transition: width 0.8s ease;
        }
        
        .score-value {
            min-width: 45px;
            text-align: right;
            font-weight: 600;
            color: #667eea;
        }
        
        .holland-section {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-radius: 15px;
            border: 2px solid #e1e5e9;
        }
        
        .holland-section.show {
            display: block;
        }
        
        .holland-intro {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .holland-intro h3 {
            color: #2d3436;
            margin-bottom: 10px;
            font-size: 20px;
        }
        
        .holland-intro p {
            color: #636e72;
            line-height: 1.6;
        }
        
        .holland-intro-content {
            text-align: center;
            margin-top: 10px;
        }
        
        .holland-highlight-box {
            background: linear-gradient(135deg, #fff9e6 0%, #ffeaa7 100%) !important;
            border: 2px solid #fdcb6e !important;
            border-radius: 15px !important;
            padding: 25px !important;
            color: var(--dark-color) !important;
            margin-bottom: 25px !important;
            text-align: left !important;
            box-shadow: 0 4px 15px rgba(253, 203, 110, 0.2) !important;
        }
        
        .holland-highlight-box h3 {
            color: var(--dark-color);
            margin-bottom: 15px;
            font-size: 20px;
            font-weight: 600;
            text-align: center;
        }
        
        .holland-highlight-box p {
            color: #6c5ce7;
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 15px;
            text-align: center;
        }
        
        .holland-features h4 {
            color: var(--dark-color);
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .holland-features ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .holland-features li {
            color: #6c5ce7;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 8px;
            padding-left: 5px;
        }
        
        .holland-test {
            display: none;
        }
        
        .holland-test.show {
            display: block;
        }
        
        .question-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .progress-bar {
            background: #e1e5e9;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            flex: 1;
            margin: 0 15px;
        }
        
        .progress-fill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .question-text {
            font-size: 18px;
            color: #2d3436;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option {
            position: relative;
            display: flex;
            align-items: center;
            padding: 20px 24px;
            margin: 8px 0;
            border: 2px solid #e9ecef;
            border-radius: 16px;
            background: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            gap: 16px;
        }
        
        .option:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
            background: #fafbff;
        }
        
        .option.selected {
            border-color: #667eea;
            background: #f0f4ff;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);
        }
        
        .option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin: 0;
            cursor: pointer;
            accent-color: #667eea;
        }
        
        .option-text {
            flex: 1;
            font-size: 16px;
            font-weight: 500;
            color: #2d3436;
            line-height: 1.4;
        }
        
        .option.selected .option-text {
            color: #667eea;
            font-weight: 600;
        }
        
        .option-selecting {
            animation: selectPulse 0.6s ease;
        }
        
        @keyframes selectPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .auto-next-indicator {
            position: absolute;
            top: -8px;
            right: 12px;
            font-size: 11px;
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            padding: 4px 8px;
            border-radius: 8px;
            opacity: 0;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .option.selected .auto-next-indicator {
            opacity: 1;
            transform: translateY(-2px);
        }
        
        .holland-result {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            border: 2px solid #e1e5e9;
        }
        
        .holland-result.show {
            display: block;
        }
        
        .holland-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .score-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .score-item .type {
            font-size: 14px;
            color: #636e72;
            margin-bottom: 5px;
        }
        
        .score-item .name {
            font-size: 12px;
            color: #2d3436;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .score-item .score {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .recommendations {
                grid-template-columns: 1fr;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .holland-scores {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Âç°ÁâáÊî∂Áº©Ê†∑Âºè */
        .card.minimized {
            max-height: 60px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .card.minimized .form,
        .card.minimized .card-title svg,
        .card.minimized .card-title::after {
            display: none;
        }

        .card.minimized .card-title {
            font-size: 16px;
            margin-bottom: 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title .expand-icon {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
            cursor: pointer;
            opacity: 0;
        }

        .card.minimized .card-title .expand-icon {
            transform: rotate(180deg);
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L15 7L21 7L16 10L18 15L12 12L6 15L8 10L3 7L9 7L12 2Z" fill="#667eea"/>
                <path d="M12 12L18 15L16 10L21 7L15 7L12 2L9 7L3 7L8 10L6 15L12 12Z" stroke="#764ba2" stroke-width="1.5"/>
            </svg> Â≠¶‰π†ÊñπÂêëÊô∫ËÉΩÂàÜÊûê</h1>
            <p class="subtitle">ËûçÂêàÁ¥´ÂæÆÊñóÊï∞‰º†ÁªüÊô∫ÊÖß‰∏éÈúçÂÖ∞Âæ∑ËÅå‰∏öÁêÜËÆ∫Ôºå‰∏∫ÊÇ®ÈáèË∫´ÂÆöÂà∂ÊúÄ‰Ω≥Â≠¶‰π†ÂèëÂ±ïË∑ØÂæÑ</p>
        </div>

        <div class="card" id="personalInfoCard">
            <h2 class="card-title" onclick="togglePersonalInfoCard()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 3C10.22 3 8.47991 3.52784 6.99987 4.51677C5.51983 5.50571 4.36628 6.91131 3.68509 8.55585C3.0039 10.2004 2.82567 12.01 3.17294 13.7558C3.5202 15.5016 4.37737 17.1053 5.63604 18.364C6.89472 19.6226 8.49836 20.4798 10.2442 20.8271C11.99 21.1743 13.7996 20.9961 15.4442 20.3149C17.0887 19.6337 18.4943 18.4802 19.4832 17.0001C20.4722 15.5201 21 13.78 21 12C21 9.61305 20.0518 7.32387 18.364 5.63604C16.6761 3.94821 14.3869 3 12 3ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00347 15.0615 4.60897C16.5233 5.21447 17.7727 6.23985 18.6518 7.55544C19.5308 8.87104 20 10.4178 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z" fill="#667eea"/>
                    <path d="M12 7V12L16 14" stroke="#764ba2" stroke-width="2" stroke-linecap="round"/>
                </svg> 
                ‰∏™‰∫∫‰ø°ÊÅØ
                <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 14L12 9L17 14" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </h2>
            
            <form id="analysisForm" class="form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="gender">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="#667eea"/>
                            </svg>
                            ÊÄßÂà´
                        </label>
                        <select id="gender" name="gender" required>
                            <option value="">ËØ∑ÈÄâÊã©ÊÄßÂà´</option>
                            <option value="Áî∑">Áî∑</option>
                            <option value="Â•≥">Â•≥</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthDate">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 4H18V2H16V4H8V2H6V4H5C3.89 4 3.01 4.9 3.01 6L3 20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4ZM19 20H5V10H19V20ZM19 8H5V6H19V8ZM9 14H7V12H9V14ZM13 14H11V12H13V14ZM17 14H15V12H17V14ZM9 18H7V16H9V18ZM13 18H11V16H13V18ZM17 18H15V16H17V18Z" fill="#667eea"/>
                            </svg>
                            Âá∫ÁîüÊó•Êúü
                        </label>
                        <input type="date" id="birthDate" name="birthDate" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="birthTime">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 15.08L12.5 12.25V7Z" fill="#667eea"/>
                        </svg>
                        Âá∫ÁîüÊó∂Ëæ∞
                    </label>
                    <select id="birthTime" name="birthTime" required>
                        <option value="">ËØ∑ÈÄâÊã©Êó∂Ëæ∞</option>
                        <option value="Â≠êÊó∂">Â≠êÊó∂ (23:00-01:00)</option>
                        <option value="‰∏ëÊó∂">‰∏ëÊó∂ (01:00-03:00)</option>
                        <option value="ÂØÖÊó∂">ÂØÖÊó∂ (03:00-05:00)</option>
                        <option value="ÂçØÊó∂">ÂçØÊó∂ (05:00-07:00)</option>
                        <option value="Ëæ∞Êó∂">Ëæ∞Êó∂ (07:00-09:00)</option>
                        <option value="Â∑≥Êó∂">Â∑≥Êó∂ (09:00-11:00)</option>
                        <option value="ÂçàÊó∂">ÂçàÊó∂ (11:00-13:00)</option>
                        <option value="Êú™Êó∂">Êú™Êó∂ (13:00-15:00)</option>
                        <option value="Áî≥Êó∂">Áî≥Êó∂ (15:00-17:00)</option>
                        <option value="ÈÖâÊó∂">ÈÖâÊó∂ (17:00-19:00)</option>
                        <option value="ÊàåÊó∂">ÊàåÊó∂ (19:00-21:00)</option>
                        <option value="‰∫•Êó∂">‰∫•Êó∂ (21:00-23:00)</option>
                    </select>
                </div>
                
                <button type="submit" class="btn btn-full">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.5 16.5L4.5 11.5L5.91 10.09L9.5 13.67L18.09 5.09L19.5 6.5L9.5 16.5Z" fill="white"/>
                    </svg>
                    ÂºÄÂßãÂàÜÊûê
                </button>
            </form>
        </div>

        <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
        <div id="loading" class="loading">
            <div class="loading-content">
                <div class="ai-loading-animation">
                    <div class="ai-brain"></div>
                    <div class="ai-dots">
                        <div class="ai-dot"></div>
                        <div class="ai-dot"></div>
                        <div class="ai-dot"></div>
                    </div>
                </div>
                <div class="loading-text">DeepSeek AI Ê≠£Âú®ÂàÜÊûê‰∏≠</div>
                <div class="loading-subtitle">ËØ∑ÂãøÂà∑Êñ∞È°µÈù¢ÊàñËøõË°åÂÖ∂‰ªñÊìç‰Ωú</div>
                <div class="loading-progress">
                    <div class="loading-progress-bar"></div>
                </div>
            </div>
        </div>

        <!-- Á¥´ÂæÆÊñóÊï∞ÂàÜÊûêÁªìÊûú -->
        <div id="result" class="card result-section">
            <h2 class="card-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#667eea"/>
                </svg>
                Á¥´ÂæÆÊñóÊï∞ÂàÜÊûêÁªìÊûú
            </h2>
            
            <div id="resultContent" class="result-content"></div>
        </div>

        <!-- ÈúçÂÖ∞Âæ∑ÊµãËØïÊé®Ëçê -->
        <div id="hollandRecommendation" class="card holland-section" style="display: none;">
            <h2 class="card-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="#667eea"/>
                </svg>
                Ëøõ‰∏ÄÊ≠•‰∫ÜËß£ÊÇ®ÁöÑËÅå‰∏öÂÖ¥Ë∂£
            </h2>
            
            <div class="holland-intro-content">
                <div class="holland-highlight-box">
                    <h3>ÈúçÂÖ∞Âæ∑ËÅå‰∏öÂÖ¥Ë∂£ÊµãËØï</h3>
                    <p>Âü∫‰∫éÊÇ®ÁöÑÁ¥´ÂæÆÊñóÊï∞ÂàÜÊûêÔºåÊàë‰ª¨Âª∫ËÆÆÊÇ®ËøõË°åÈúçÂÖ∞Âæ∑ËÅå‰∏öÂÖ¥Ë∂£ÊµãËØïÔºå‰ª•Ëé∑ÂæóÊõ¥ÂÖ®Èù¢ÁöÑ‰∏ì‰∏öÊé®Ëçê„ÄÇ</p>
                    
                    <div class="holland-features">
                        <h4>ÈúçÂÖ∞Âæ∑ÊµãËØïËÉΩ‰∏∫ÊÇ®Êèê‰æõÔºö</h4>
                        <ul>
                            <li>‚Ä¢ Áé∞‰ª£ÂøÉÁêÜÂ≠¶ËßÜËßíÁöÑËÅå‰∏öÂÖ¥Ë∂£ÂàÜÊûê</li>
                            <li>‚Ä¢ RIASECÂÖ≠Áª¥Â∫¶‰∏ì‰∏öÂåπÈÖç</li>
                            <li>‚Ä¢ ‰∏éÁ¥´ÂæÆÊñóÊï∞ÂàÜÊûêÁöÑÂèåÈáçÈ™åËØÅ</li>
                            <li>‚Ä¢ Êõ¥Á≤æÂáÜÁöÑ‰∏ì‰∏öÊé®Ëçê</li>
                        </ul>
                    </div>
                </div>
                
                <button class="btn btn-full" id="startHollandBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 5V14L15 9.5L8 5Z" fill="currentColor"/>
                    </svg>
                    ÂºÄÂßãÈúçÂÖ∞Âæ∑ËÅå‰∏öÊµãËØï
                </button>
            </div>
        </div>

        <!-- ÈúçÂÖ∞Âæ∑ÊµãËØï -->
        <div id="hollandTest" class="holland-test">
            <div class="card">
                <div class="question-header">
                    <div class="question-number">Á¨¨ <span id="currentQuestion">1</span> / 24 È¢ò</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 4.16%"></div>
                    </div>
                </div>
                
                <div class="question-card">
                    <div class="question-text" id="questionText">ÊÇ®ÂØπ‰øÆÁêÜÊú∫Ê¢∞ÊàñÁîµÂô®ËÆæÂ§áÁöÑÂÖ¥Ë∂£Á®ãÂ∫¶Â¶Ç‰ΩïÔºü</div>
                    
                    <div class="options" id="questionOptions">
                        <label class="option">
                            <input type="radio" name="currentAnswer" value="5">
                            <span class="option-text">ÈùûÂ∏∏ÂñúÊ¨¢</span>
                            <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                        </label>
                        
                        <label class="option">
                            <input type="radio" name="currentAnswer" value="4">
                            <span class="option-text">ÊØîËæÉÂñúÊ¨¢</span>
                            <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                        </label>
                        
                        <label class="option">
                            <input type="radio" name="currentAnswer" value="3">
                            <span class="option-text">‰∏ÄËà¨</span>
                            <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                        </label>
                        
                        <label class="option">
                            <input type="radio" name="currentAnswer" value="2">
                            <span class="option-text">‰∏çÂ§™ÂñúÊ¨¢</span>
                            <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                        </label>
                        
                        <label class="option">
                            <input type="radio" name="currentAnswer" value="1">
                            <span class="option-text">ÈùûÂ∏∏‰∏çÂñúÊ¨¢</span>
                            <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                        </label>
                    </div>
                    
                    <button class="btn btn-full" id="nextQuestion" disabled style="display: none;">
                        ‰∏ã‰∏ÄÈ¢ò
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 5L16 12L9 19" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- ÈúçÂÖ∞Âæ∑ÊµãËØïÁªìÊûú -->
        <div id="hollandResult" class="card holland-result">
            <h2 class="card-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9.5 16.5L4.5 11.5L5.91 10.09L9.5 13.67L18.09 5.09L19.5 6.5L9.5 16.5Z" fill="#667eea"/>
                </svg>
                ÈúçÂÖ∞Âæ∑ËÅå‰∏öÂÖ¥Ë∂£ÊµãËØïÁªìÊûú
            </h2>
            
            <div id="hollandResultContent"></div>
        </div>
    </div>

    <script>
        // ===== È°µÈù¢ÂàùÂßãÂåñ =====
        
        // È°µÈù¢Âä†ËΩΩÊ£ÄÊü•
        window.addEventListener('load', function() {
            if (typeof hideLoading !== 'function') {
                alert('È°µÈù¢Âä†ËΩΩÂºÇÂ∏∏ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
            }
        });

        // ÂÖ®Â±ÄÂèòÈáè
        let currentQuestionIndex = 0;
        let hollandAnswers = [];
        let ziweiResult = null;

        // Êó∂Ëæ∞Êò†Â∞Ñ - Êò†Â∞ÑÂà∞ÂÖ∑‰ΩìÂ∞èÊó∂Êï∞Ôºå‰ª•‰æøÂêéÁ´ØÊ≠£Á°ÆÂ§ÑÁêÜ
        const timeMapping = {
            'Â≠êÊó∂': 0,   // 00:00 (23:00-01:00)
            '‰∏ëÊó∂': 2,   // 02:00 (01:00-03:00)
            'ÂØÖÊó∂': 4,   // 04:00 (03:00-05:00)
            'ÂçØÊó∂': 6,   // 06:00 (05:00-07:00)
            'Ëæ∞Êó∂': 8,   // 08:00 (07:00-09:00)
            'Â∑≥Êó∂': 10,  // 10:00 (09:00-11:00)
            'ÂçàÊó∂': 12,  // 12:00 (11:00-13:00)
            'Êú™Êó∂': 14,  // 14:00 (13:00-15:00)
            'Áî≥Êó∂': 16,  // 16:00 (15:00-17:00)
            'ÈÖâÊó∂': 18,  // 18:00 (17:00-19:00)
            'ÊàåÊó∂': 20,  // 20:00 (19:00-21:00)
            '‰∫•Êó∂': 22   // 22:00 (21:00-23:00)
        };

        // ÈúçÂÖ∞Âæ∑ÊµãËØïÈ¢òÁõÆ
        const hollandQuestions = [
            // R - Áé∞ÂÆûÂûã (Realistic)
            { text: '‰øÆÁêÜÊú∫Ê¢∞ÊàñÁîµÂô®ËÆæÂ§á', type: 'R' },
            { text: '‰ªé‰∫ãÊà∑Â§ñÂ∑•‰ΩúÊàñ‰ΩìÂäõÂä≥Âä®', type: 'R' },
            { text: 'Êìç‰ΩúÊú∫Âô®Êàñ‰ΩøÁî®Â∑•ÂÖ∑', type: 'R' },
            { text: 'Âà∂‰ΩúÊâãÂ∑•Ëâ∫ÂìÅÊàñÊú®Â∑•Ê¥ª', type: 'R' },
            
            // I - Á†îÁ©∂Âûã (Investigative)
            { text: 'ËøõË°åÁßëÂ≠¶ÂÆûÈ™åÊàñÁ†îÁ©∂', type: 'I' },
            { text: 'ÂàÜÊûêÊï∞ÊçÆÂíåËß£ÂÜ≥Â§çÊùÇÈóÆÈ¢ò', type: 'I' },
            { text: 'Â≠¶‰π†Êñ∞ÁöÑÁßëÂ≠¶Áü•ËØÜ', type: 'I' },
            { text: 'Áã¨Á´ãÊÄùËÄÉÂíåÊé¢Á¥¢Êú™Áü•È¢ÜÂüü', type: 'I' },
            
            // A - Ëâ∫ÊúØÂûã (Artistic)
            { text: 'Âàõ‰ΩúËâ∫ÊúØ‰ΩúÂìÅÊàñËÆæËÆ°', type: 'A' },
            { text: 'Ë°®ÊºîÈü≥‰πê„ÄÅÊàèÂâßÊàñËàûËπà', type: 'A' },
            { text: 'ÂÜô‰ΩúÂ∞èËØ¥„ÄÅËØóÊ≠åÊàñÂâßÊú¨', type: 'A' },
            { text: 'Ë£ÖÈ•∞ÊàøÈó¥ÊàñËÆæËÆ°ÊúçË£Ö', type: 'A' },
            
            // S - Á§æ‰ºöÂûã (Social)
            { text: 'Â∏ÆÂä©‰ªñ‰∫∫Ëß£ÂÜ≥ÈóÆÈ¢ò', type: 'S' },
            { text: 'ÊïôÊéàÊàñÂüπËÆ≠‰ªñ‰∫∫', type: 'S' },
            { text: 'ÂèÇ‰∏éÁ§æÂå∫ÊúçÂä°Ê¥ªÂä®', type: 'S' },
            { text: 'ÁÖßÈ°æÁóÖ‰∫∫ÊàñËÄÅ‰∫∫', type: 'S' },
            
            // E - ‰ºÅ‰∏öÂûã (Enterprising)
            { text: 'È¢ÜÂØºÂõ¢ÈòüÂÆåÊàêÈ°πÁõÆ', type: 'E' },
            { text: 'ÈîÄÂîÆ‰∫ßÂìÅÊàñÊúçÂä°', type: 'E' },
            { text: 'ÁªÑÁªáÊ¥ªÂä®Êàñ‰ºöËÆÆ', type: 'E' },
            { text: 'ÁÆ°ÁêÜ‰ºÅ‰∏öÊàñÈÉ®Èó®', type: 'E' },
            
            // C - Â∏∏ËßÑÂûã (Conventional)
            { text: 'Êï¥ÁêÜÊñá‰ª∂ÂíåÊï∞ÊçÆ', type: 'C' },
            { text: 'ÊåâÁÖßËßÑÂÆöÁ®ãÂ∫èÂ∑•‰Ωú', type: 'C' },
            { text: 'ËÆ∞ÂΩïÂíåÁªüËÆ°‰ø°ÊÅØ', type: 'C' },
            { text: 'Â§ÑÁêÜË¥¢Âä°Êàñ‰ºöËÆ°Â∑•‰Ωú', type: 'C' }
        ];

        // ÈúçÂÖ∞Âæ∑Á±ªÂûãÊèèËø∞
        const hollandTypes = {
            'R': { name: 'Áé∞ÂÆûÂûã', description: 'ÂñúÊ¨¢ÂÖ∑‰ΩìÁöÑ„ÄÅÂÆûÈôÖÁöÑÂ∑•‰ΩúÔºåÂñÑ‰∫é‰ΩøÁî®Â∑•ÂÖ∑ÂíåÊìç‰ΩúÊú∫Ê¢∞ËÆæÂ§á' },
            'I': { name: 'Á†îÁ©∂Âûã', description: 'ÂñúÊ¨¢ËßÇÂØü„ÄÅÂ≠¶‰π†„ÄÅÁ†îÁ©∂„ÄÅÂàÜÊûê„ÄÅËØÑ‰º∞ÊàñËß£ÂÜ≥ÈóÆÈ¢ò' },
            'A': { name: 'Ëâ∫ÊúØÂûã', description: 'ÂÖ∑Êúâ‰∏∞ÂØåÁöÑÊÉ≥Ë±°ÂäõÂíåÂàõÈÄ†ÂäõÔºåÂñúÊ¨¢Âú®Ëá™Áî±„ÄÅÂºÄÊîæÁöÑÁéØÂ¢É‰∏≠Ë°®ËææËá™Â∑±' },
            'S': { name: 'Á§æ‰ºöÂûã', description: 'ÂÖ≥ÂøÉ‰ªñ‰∫∫Á¶èÂà©Ôºå‰πê‰∫éÂä©‰∫∫ÔºåÂñÑ‰∫é‰∏é‰∫∫‰∫§ÂæÄ' },
            'E': { name: '‰ºÅ‰∏öÂûã', description: 'ÂÖ∑ÊúâÈ¢ÜÂØºÊâçËÉΩÔºåÂñÑ‰∫éËØ¥ÊúçÂíåÁÆ°ÁêÜ‰ªñ‰∫∫' },
            'C': { name: 'Â∏∏ËßÑÂûã', description: 'ÂñúÊ¨¢ÊúâÁß©Â∫è„ÄÅÂÆâÂÆöÁöÑÂ∑•‰ΩúÁéØÂ¢ÉÔºåÂñÑ‰∫éÂ§ÑÁêÜÊï∞ÊçÆÂíåÁªÜËäÇÂ∑•‰Ωú' }
        };

        // APIË∞ÉÁî®Áä∂ÊÄÅÁÆ°ÁêÜ
        let isAPICallInProgress = false;

        // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
        function showLoading(message = 'DeepSeek AI Ê≠£Âú®ÂàÜÊûê‰∏≠', subtitle = 'ËØ∑ÂãøÂà∑Êñ∞È°µÈù¢ÊàñËøõË°åÂÖ∂‰ªñÊìç‰Ωú') {
            // Èò≤Ê≠¢ÈáçÂ§çË∞ÉÁî®
            if (isAPICallInProgress) {
                return false;
            }
            
            isAPICallInProgress = true;
            
            const loading = document.getElementById('loading');
            const loadingText = loading.querySelector('.loading-text');
            const loadingSubtitle = loading.querySelector('.loading-subtitle');
            
            if (loadingText) {
                loadingText.textContent = message;
            }
            if (loadingSubtitle) {
                loadingSubtitle.textContent = subtitle;
            }
            
            loading.classList.add('show');
            
            // Á¶ÅÁî®ÊâÄÊúâÂèØÁÇπÂáªÂÖÉÁ¥†
            disableAllInteractions();
            
            return true;
        }

        // ÈöêËóèÂä†ËΩΩÁä∂ÊÄÅ
        function hideLoading() {
            const loading = document.getElementById('loading');
            loading.classList.remove('show');
            
            // ÈáçÊñ∞ÂêØÁî®ÊâÄÊúâ‰∫§‰∫í
            enableAllInteractions();
            
            // ÈáçÁΩÆAPIË∞ÉÁî®Áä∂ÊÄÅ
            isAPICallInProgress = false;
            
        }

        // Á¶ÅÁî®ÊâÄÊúâÁî®Êà∑‰∫§‰∫í
        function disableAllInteractions() {
            // Á¶ÅÁî®ÊâÄÊúâÊåâÈíÆ
            const buttons = document.querySelectorAll('button');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.6';
                btn.style.cursor = 'not-allowed';
            });
            
            // Á¶ÅÁî®ÊâÄÊúâË°®ÂçïÂÖÉÁ¥†
            const formElements = document.querySelectorAll('input, select, textarea');
            formElements.forEach(element => {
                element.disabled = true;
                element.style.opacity = '0.6';
            });
            
            // Á¶ÅÁî®ÈúçÂÖ∞Âæ∑ÊµãËØïÈÄâÈ°π
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.style.pointerEvents = 'none';
                option.style.opacity = '0.6';
            });
        }

        // ÊÅ¢Â§çÊâÄÊúâÁî®Êà∑‰∫§‰∫í
        function enableAllInteractions() {
            // ÊÅ¢Â§çÊâÄÊúâÊåâÈíÆ
            const buttons = document.querySelectorAll('button');
            buttons.forEach(btn => {
                btn.disabled = false;
                btn.style.opacity = '';
                btn.style.cursor = '';
            });
            
            // ÊÅ¢Â§çÊâÄÊúâË°®ÂçïÂÖÉÁ¥†
            const formElements = document.querySelectorAll('input, select, textarea');
            formElements.forEach(element => {
                element.disabled = false;
                element.style.opacity = '';
            });
            
            // ÊÅ¢Â§çÈúçÂÖ∞Âæ∑ÊµãËØïÈÄâÈ°π
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.style.pointerEvents = '';
                option.style.opacity = '';
            });
        }

        // ÂÆâÂÖ®ÁöÑAPIË∞ÉÁî®ÂåÖË£ÖÂô®
        async function safeAPICall(apiFunction, loadingMessage, loadingSubtitle) {
            if (!showLoading(loadingMessage, loadingSubtitle)) {
                return; // Â¶ÇÊûúÂ∑≤ÊúâAPIË∞ÉÁî®Âú®ËøõË°åÔºåÁõ¥Êé•ËøîÂõû
            }
            
            try {
                const result = await apiFunction();
                return result;
            } catch (error) {
                
                
                // ÊòæÁ§∫Áî®Êà∑ÂèãÂ•ΩÁöÑÈîôËØØ‰ø°ÊÅØ
                let userMessage = '';
                if (error.message.includes('fetch')) {
                    userMessage = 'ÁΩëÁªúËøûÊé•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•ÊàñÁ®çÂêéÈáçËØï';
                } else if (error.message.includes('timeout')) {
                    userMessage = 'ËØ∑Ê±ÇË∂ÖÊó∂ÔºåÊúçÂä°Âô®ÂìçÂ∫îËæÉÊÖ¢ÔºåËØ∑Á®çÂêéÈáçËØï';
                } else if (error.message.includes('HTTP 500')) {
                    userMessage = 'ÊúçÂä°Âô®ÂÜÖÈÉ®ÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØïÊàñËÅîÁ≥ªÊäÄÊúØÊîØÊåÅ';
                } else if (error.message.includes('ÊâÄÊúâAPIÁ´ØÁÇπÈÉΩÊó†Ê≥ïËøûÊé•')) {
                    userMessage = error.message;
                } else {
                    userMessage = `ÂàÜÊûêÂ§±Ë¥•: ${error.message}`;
                }
                
                alert(userMessage);
                throw error;
            } finally {
                hideLoading();
            }
        }

        // Ë°®ÂçïÊèê‰∫§Â§ÑÁêÜ
        document.getElementById('analysisForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            // È™åËØÅË°®Âçï
            if (!data.gender || !data.birthDate || !data.birthTime) {
                alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑ‰∏™‰∫∫‰ø°ÊÅØ');
                return;
            }
            
            await analyzeZiwei(data);
        });

        // ÁõëÂê¨Âá∫ÁîüÊó∂Ëæ∞ÈÄâÊã©ÔºåËá™Âä®Ëß¶ÂèëÂàÜÊûê
        document.getElementById('birthTime').addEventListener('change', function() {
            const gender = document.getElementById('gender').value;
            const birthDate = document.getElementById('birthDate').value;
            const birthTime = this.value;
            
            // Ê£ÄÊü•ÊòØÂê¶ÊâÄÊúâÂøÖÂ°´È°πÈÉΩÂ∑≤Â°´ÂÜô
            if (gender && birthDate && birthTime) {
                
                const data = {
                    name: 'Áî®Êà∑', // ÈªòËÆ§ÂßìÂêç
                    gender: gender,
                    birthDate: birthDate,
                    birthTime: birthTime,
                    birthPlace: 'Âåó‰∫¨' // ÈªòËÆ§Âá∫ÁîüÂú∞ÁÇπ
                };
                
                // Ëá™Âä®ÂºÄÂßãÂàÜÊûê
                analyzeZiwei(data);
            }
        });

        // ÂàÜÊûêÁ¥´ÂæÆÊñóÊï∞
        async function analyzeZiwei(data) {
            const result = document.getElementById('result');
            result.classList.remove('show');
            
            // ‰ΩøÁî®ÂÆâÂÖ®ÁöÑAPIË∞ÉÁî®
            await safeAPICall(
                async () => {
                    const requestData = {
                        name: data.name || 'Áî®Êà∑',
                        gender: data.gender,
                        birthYear: new Date(data.birthDate).getFullYear(),
                        birthMonth: new Date(data.birthDate).getMonth() + 1,
                        birthDay: new Date(data.birthDate).getDate(),
                        birthHour: timeMapping[data.birthTime],
                        birthMinute: 0,
                        location: data.birthPlace || 'Âåó‰∫¨'
                    };


                    // Ë∞ÉÁî®Netlify Functions API
                    const response = await fetch('/api/ziwei-analysis', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }

                    const resultData = await response.json();

                    if (resultData.success) {
                        // ‰øùÂ≠òÂàÜÊûêÁªìÊûú
                        window.ziweiAnalysisResult = resultData.data;
                        
                        // ÊòæÁ§∫ÂàÜÊûêÁªìÊûú
                        displayZiweiAnalysis(resultData.data);
                        return resultData;
                    } else {
                        throw new Error(resultData.message || 'Á¥´ÂæÆÊñóÊï∞ÂàÜÊûêÂ§±Ë¥•');
                    }
                },
                'Ê≠£Âú®ËøõË°åÁ¥´ÂæÆÊñóÊï∞ÂàÜÊûê',
                'Á¥´ÂæÆÊñóÊï∞ÊéíÁõòÂíåAIÂàÜÊûê‰∏≠'
            );
        }

        // ÊòæÁ§∫Á¥´ÂæÆÊñóÊï∞ÂàÜÊûêÁªìÊûú
        function displayZiweiAnalysis(data) {
            hideLoading();
            
            const resultSection = document.getElementById('result');
            const resultContent = document.getElementById('resultContent');
            
            const { userInfo, deepseekAnalysis } = data;
            
            let html = `
                <div class="result-content">
                    <h4>üìä Âü∫Êú¨‰ø°ÊÅØ</h4>
                    <p><strong>ÂßìÂêçÔºö</strong>${userInfo.name}</p>
                    <p><strong>ÊÄßÂà´Ôºö</strong>${userInfo.gender}</p>
                    <p><strong>Âá∫ÁîüÔºö</strong>${userInfo.solarDate} (${userInfo.lunarDate})</p>
                    <p><strong>ÁîüËæ∞ÂÖ´Â≠óÔºö</strong>${userInfo.chineseDate}</p>
                    <p><strong>ÁîüËÇñÔºö</strong>${userInfo.zodiac}</p>
                    <p><strong>ÂëΩ‰∏ªÔºö</strong>${userInfo.soul}</p>
                    <p><strong>Ë∫´‰∏ªÔºö</strong>${userInfo.body}</p>
                    <p><strong>‰∫îË°åÂ±ÄÔºö</strong>${userInfo.fiveElementsClass}</p>
                </div>

                <div class="result-content">
                    <h4>üîÆ DeepSeek AI Á¥´ÂæÆÊñóÊï∞ÂàÜÊûê</h4>
                    <div class="analysis-content">
                        ${formatAnalysisContent(deepseekAnalysis?.content || deepseekAnalysis)}
                    </div>
                    <p class="analysis-meta">
                        <small>ÂàÜÊûêÊ®°Âûã: ${deepseekAnalysis?.model || 'DeepSeek-V3'} | ÂàÜÊûêÊó∂Èó¥: ${deepseekAnalysis?.timestamp ? new Date(deepseekAnalysis.timestamp).toLocaleString() : new Date().toLocaleString()}</small>
                    </p>
                </div>
            `;
            
            resultContent.innerHTML = html;
            resultSection.classList.add('show');
            
            // ‰øùÂ≠òÂàÜÊûêÁªìÊûú‰ª•‰æõÂêéÁª≠‰ΩøÁî®
            window.ziweiAnalysisResult = data;
            
            // ÊòæÁ§∫ÈúçÂÖ∞Âæ∑ÊµãËØïÊé®Ëçê
            setTimeout(() => {
                showHollandRecommendation();
            }, 500);
        }

        // Ê†ºÂºèÂåñÂàÜÊûêÂÜÖÂÆπ
        function formatAnalysisContent(content) {
            if (!content) return '<p>ÂàÜÊûêÂÜÖÂÆπÊöÇÊó∂Êó†Ê≥ïÊòæÁ§∫</p>';
            
            // Â∞ÜMarkdownÊ†ºÂºèËΩ¨Êç¢‰∏∫HTML
            return content
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')  // Á≤ó‰Ωì
                .replace(/### (.*?)$/gm, '<h4>$1</h4>')           // ‰∏âÁ∫ßÊ†áÈ¢ò
                .replace(/## (.*?)$/gm, '<h3>$1</h3>')            // ‰∫åÁ∫ßÊ†áÈ¢ò
                .replace(/# (.*?)$/gm, '<h2>$1</h2>')             // ‰∏ÄÁ∫ßÊ†áÈ¢ò
                .replace(/\n\n/g, '</p><p>')                      // ÊÆµËêΩ
                .replace(/\n- /g, '<br>‚Ä¢ ')                       // ÂàóË°®È°π
                .replace(/^\s*-\s/gm, '‚Ä¢ ')                       // ÂàóË°®È°πÂºÄÂ§¥
                .replace(/^(?!<[h2-6]|<p|<br|‚Ä¢)(.+)$/gm, '<p>$1</p>'); // ÂåÖË£ÖÊÆµËêΩ
        }

        // ÊòæÁ§∫ÈúçÂÖ∞Âæ∑ÊµãËØïÊé®Ëçê
        function showHollandRecommendation() {
            const recommendationHtml = `
                <div class="holland-highlight-box" style="margin-top: 25px;">
                    <h3>üéØ Ëøõ‰∏ÄÊ≠•‰∫ÜËß£Ëá™Â∑±</h3>
                    <p>Âü∫‰∫éÊÇ®ÁöÑÁ¥´ÂæÆÊñóÊï∞ÂàÜÊûêÔºåÊàë‰ª¨Âª∫ËÆÆÊÇ®ËøõË°åÈúçÂÖ∞Âæ∑ËÅå‰∏öÂÖ¥Ë∂£ÊµãËØïÔºå‰ª•Ëé∑ÂæóÊõ¥ÂÖ®Èù¢ÁöÑ‰∏ì‰∏öÈÄâÊã©Âª∫ËÆÆ„ÄÇ</p>
                    
                    <div class="holland-features">
                        <h4>ÈúçÂÖ∞Âæ∑ÊµãËØïËÉΩ‰∏∫ÊÇ®Êèê‰æõÔºö</h4>
                        <ul>
                            <li>‚Ä¢ Áé∞‰ª£ÂøÉÁêÜÂ≠¶ËßÜËßíÁöÑËÅå‰∏öÂÖ¥Ë∂£ÂàÜÊûê</li>
                            <li>‚Ä¢ RIASECÂÖ≠Áª¥Â∫¶‰∏ì‰∏öÂåπÈÖç</li>
                            <li>‚Ä¢ ‰∏éÁ¥´ÂæÆÊñóÊï∞ÂàÜÊûêÁöÑÂèåÈáçÈ™åËØÅ</li>
                            <li>‚Ä¢ Êõ¥Á≤æÂáÜÁöÑ‰∏ì‰∏öÊé®Ëçê</li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-secondary btn-full" onclick="startHollandTest()" style="margin-top: 15px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 5V14L15 9.5L8 5Z" fill="currentColor"/>
                        </svg>
                        ÂºÄÂßãÈúçÂÖ∞Âæ∑ËÅå‰∏öÊµãËØï
                    </button>
                </div>
            `;
            
            document.getElementById('resultContent').innerHTML += recommendationHtml;
        }

        // DOM Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            
            // ÁªëÂÆö‰∫ã‰ª∂
            // ÊóßÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®Â∑≤Ë¢´ÁßªÈô§ÔºåÁé∞Âú®‰ΩøÁî®onclickÁõ¥Êé•Â§ÑÁêÜ
        });

        // Ë°®ÂçïÊèê‰∫§Â§ÑÁêÜ
        function handleFormSubmit(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            // È™åËØÅË°®Âçï
            if (!data.gender || !data.birthDate || !data.birthTime) {
                alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑ‰∏™‰∫∫‰ø°ÊÅØ');
                return;
            }
            
            analyzeZiwei(data);
        }

        // Âá∫ÁîüÊó∂Ëæ∞ÈÄâÊã©Â§ÑÁêÜ
        function handleBirthTimeChange() {
            const gender = document.getElementById('gender').value;
            const birthDate = document.getElementById('birthDate').value;
            const birthTime = this.value;
            
            if (gender && birthDate && birthTime) {
                const data = {
                    name: 'Áî®Êà∑',
                    gender: gender,
                    birthDate: birthDate,
                    birthTime: birthTime,
                    birthPlace: 'Âåó‰∫¨'
                };
                analyzeZiwei(data);
            }
        }

        // ‰∏™‰∫∫‰ø°ÊÅØÂç°ÁâáÊî∂Áº©/Â±ïÂºÄÊéßÂà∂
        function togglePersonalInfoCard() {
            const card = document.getElementById('personalInfoCard');
            const expandIcon = card.querySelector('.expand-icon');
            
            if (card.classList.contains('minimized')) {
                // Â±ïÂºÄ
                card.classList.remove('minimized');
            } else {
                // Êî∂Áº©
                card.classList.add('minimized');
            }
        }

        // ÂºÄÂßãÈúçÂÖ∞Âæ∑ÊµãËØï - Â¢ûÂº∫Áâà
        function startHollandTest() {
            const resultElement = document.getElementById('result');
            const hollandElement = document.getElementById('hollandRecommendation');
            const testElement = document.getElementById('hollandTest');
            const personalInfoCard = document.getElementById('personalInfoCard');
            
            if (resultElement) resultElement.style.display = 'none';
            if (hollandElement) hollandElement.style.display = 'none';
            
            // Êî∂Áº©‰∏™‰∫∫‰ø°ÊÅØÂç°Áâá
            personalInfoCard.classList.add('minimized');
            
            // ÂàùÂßãÂåñÈúçÂÖ∞Âæ∑ÊµãËØï
            currentQuestionIndex = 0;
            hollandAnswers = [];
            
            testElement.classList.add('show');
            testElement.scrollIntoView({ behavior: 'smooth' });
            
            // ÊòæÁ§∫Á¨¨‰∏ÄÈ¢ò
            displayCurrentQuestion();
            
        }

        // ÊòæÁ§∫ÂΩìÂâçÈ¢òÁõÆ - Â¢ûÂº∫ÁâàÊîØÊåÅËá™Âä®Ë∑≥ËΩ¨
        function displayCurrentQuestion() {
            const question = hollandQuestions[currentQuestionIndex];
            const questionText = document.getElementById('questionText');
            const questionOptions = document.getElementById('questionOptions');
            const currentQuestionSpan = document.getElementById('currentQuestion');
            const progressFill = document.getElementById('progressFill');
            const nextButton = document.getElementById('nextQuestion');

            // Êõ¥Êñ∞È¢òÁõÆÁºñÂè∑ÂíåËøõÂ∫¶
            currentQuestionSpan.textContent = currentQuestionIndex + 1;
            const progress = ((currentQuestionIndex + 1) / hollandQuestions.length) * 100;
            progressFill.style.width = progress + '%';

            // ÊòæÁ§∫È¢òÁõÆÊñáÊú¨
            questionText.textContent = question.text;

            // ÁîüÊàêÈÄâÈ°π - Â¢ûÂº∫ÁâàÊîØÊåÅËá™Âä®Ë∑≥ËΩ¨
            questionOptions.innerHTML = `
                <div class="option-group">
                    <label class="option" onclick="selectOptionAndNext(this, 5)">
                        <input type="radio" name="currentAnswer" value="5">
                        <span class="option-text">ÈùûÂ∏∏ÂñúÊ¨¢</span>
                        <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                    </label>
                    <label class="option" onclick="selectOptionAndNext(this, 4)">
                        <input type="radio" name="currentAnswer" value="4">
                        <span class="option-text">ÊØîËæÉÂñúÊ¨¢</span>
                        <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                    </label>
                    <label class="option" onclick="selectOptionAndNext(this, 3)">
                        <input type="radio" name="currentAnswer" value="3">
                        <span class="option-text">‰∏ÄËà¨</span>
                        <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                    </label>
                    <label class="option" onclick="selectOptionAndNext(this, 2)">
                        <input type="radio" name="currentAnswer" value="2">
                        <span class="option-text">‰∏çÂ§™ÂñúÊ¨¢</span>
                        <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                    </label>
                    <label class="option" onclick="selectOptionAndNext(this, 1)">
                        <input type="radio" name="currentAnswer" value="1">
                        <span class="option-text">ÈùûÂ∏∏‰∏çÂñúÊ¨¢</span>
                        <div class="auto-next-indicator">Ê≠£Âú®Ë∑≥ËΩ¨...</div>
                    </label>
                </div>
            `;

            // ÈöêËóè‰∏ã‰∏ÄÈ¢òÊåâÈíÆÔºàÂõ†‰∏∫Áé∞Âú®ÊòØËá™Âä®Ë∑≥ËΩ¨Ôºâ
            nextButton.style.display = 'none';

            // Êõ¥Êñ∞ÊåâÈíÆÊñáÊú¨ÔºàÁî®‰∫éÊúÄÂêé‰∏ÄÈ¢òÁöÑÂÆåÊàêÊµãËØïÔºâ
            if (currentQuestionIndex === hollandQuestions.length - 1) {
                nextButton.textContent = 'ÂÆåÊàêÊµãËØï';
            } else {
                nextButton.textContent = '‰∏ã‰∏ÄÈ¢ò';
            }
        }

        // ÈÄâÊã©ÈÄâÈ°πÂπ∂Ëá™Âä®Ë∑≥ËΩ¨Âà∞‰∏ã‰∏ÄÈ¢ò
        function selectOptionAndNext(optionElement, value) {
            // Èò≤Ê≠¢ÈáçÂ§çÈÄâÊã©
            if (optionElement.classList.contains('selected')) {
                return;
            }

            // Ê∏ÖÈô§ÂÖ∂‰ªñÈÄâÈ°πÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });

            // ËÆæÁΩÆÂΩìÂâçÈÄâÈ°π‰∏∫ÈÄâ‰∏≠Áä∂ÊÄÅ
            optionElement.classList.add('selected', 'option-selecting');
            
            // ËÆæÁΩÆradio button‰∏∫ÈÄâ‰∏≠Áä∂ÊÄÅ
            const radioButton = optionElement.querySelector('input[type="radio"]');
            if (radioButton) {
                radioButton.checked = true;
            }
            
            // ‰øùÂ≠òÁ≠îÊ°à
            hollandAnswers.push({
                questionIndex: currentQuestionIndex,
                type: hollandQuestions[currentQuestionIndex].type,
                score: parseInt(value)
            });


            // Ê£ÄÊü•ÊòØÂê¶ÊòØÊúÄÂêé‰∏ÄÈ¢ò
            if (currentQuestionIndex === hollandQuestions.length - 1) {
                // ÊúÄÂêé‰∏ÄÈ¢òÔºåÂª∂ËøüÂÆåÊàêÊµãËØï
                setTimeout(() => {
                    finishHollandTest();
                }, 500);
            } else {
                // Âª∂ËøüË∑≥ËΩ¨Âà∞‰∏ã‰∏ÄÈ¢ò
                setTimeout(() => {
                    currentQuestionIndex++;
                    displayCurrentQuestion();
                }, 500);
            }
        }

        // ÂÆåÊàêÈúçÂÖ∞Âæ∑ÊµãËØï
        function finishHollandTest() {
            
            // ËÆ°ÁÆóÂæóÂàÜ
            const scores = { R: 0, I: 0, A: 0, S: 0, E: 0, C: 0 };
            
            hollandAnswers.forEach(answer => {
                scores[answer.type] += answer.score;
            });


            // ÂºÄÂßãÁªºÂêàÂàÜÊûê
            submitHollandTest();
        }

        // Êèê‰∫§ÈúçÂÖ∞Âæ∑ÊµãËØï
        async function submitHollandTest() {
            
            if (hollandAnswers.length !== 24) {
                alert('ÊµãËØïÊï∞ÊçÆ‰∏çÂÆåÊï¥ÔºåËØ∑ÈáçÊñ∞ÂºÄÂßãÊµãËØï');
                return;
            }

            // Ê£ÄÊü•ÊòØÂê¶ÊúâÂøÖË¶ÅÁöÑÁ¥´ÂæÆÂàÜÊûêÊï∞ÊçÆ
            if (!window.ziweiAnalysisResult || !window.ziweiAnalysisResult.userInfo) {
                alert('Áº∫Â∞ëÁ¥´ÂæÆÊñóÊï∞ÂàÜÊûêÊï∞ÊçÆÔºåËØ∑ÂÖàÂÆåÊàê‰∏™‰∫∫‰ø°ÊÅØÂ°´ÂÜô');
                return;
            }

            // ‰ΩøÁî®ÂÆâÂÖ®ÁöÑAPIË∞ÉÁî®
            await safeAPICall(
                async () => {
                    // ËΩ¨Êç¢Á≠îÊ°àÊ†ºÂºè‰∏∫APIÈúÄË¶ÅÁöÑÊ†ºÂºè
                    const answersForAPI = hollandAnswers.map(answer => answer.score);
                    

                    // ÊûÑÂª∫ËØ∑Ê±ÇÊï∞ÊçÆ
                    const requestData = {
                        name: window.ziweiAnalysisResult.userInfo.name || 'Áî®Êà∑',
                        gender: window.ziweiAnalysisResult.userInfo.gender,
                        birthYear: new Date(window.ziweiAnalysisResult.userInfo.solarDate).getFullYear(),
                        birthMonth: new Date(window.ziweiAnalysisResult.userInfo.solarDate).getMonth() + 1,
                        birthDay: new Date(window.ziweiAnalysisResult.userInfo.solarDate).getDate(),
                        birthHour: window.ziweiAnalysisResult.userInfo.birthHour || 8,
                        birthMinute: window.ziweiAnalysisResult.userInfo.birthMinute || 0,
                        location: window.ziweiAnalysisResult.userInfo.location || 'Âåó‰∫¨',
                        hollandAnswers: answersForAPI,
                        ziweiAnalysis: window.ziweiAnalysisResult
                    };


                    // Ë∞ÉÁî®Netlify Functions API
                    const response = await fetch('/api/combined-analysis', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            answers: answersForAPI,
                            userInfo: {
                                name: window.ziweiAnalysisResult.userInfo.name,
                                gender: window.ziweiAnalysisResult.userInfo.gender,
                                ziweiInfo: window.ziweiAnalysisResult
                            }
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }

                    const result = await response.json();

                    if (result.success) {
                        displayHollandAnalysis(result.data);
                        return result;
                    } else {
                        throw new Error(result.message || 'ÈúçÂÖ∞Âæ∑ÊµãËØïÂàÜÊûêÂ§±Ë¥•');
                    }
                },
                'Ê≠£Âú®ËøõË°åÁªºÂêàÂàÜÊûê',
                'Ê≠£Âú®ÁªìÂêàÁ¥´ÂæÆÊñóÊï∞‰∏éÈúçÂÖ∞Âæ∑ÊµãËØïËøõË°åÊ∑±Â∫¶ÂàÜÊûê...'
            );
        }

        // ÊòæÁ§∫ÈúçÂÖ∞Âæ∑ÂàÜÊûêÁªìÊûú
        function displayHollandAnalysis(data) {
            hideLoading();
            
            // ÈöêËóèÈúçÂÖ∞Âæ∑ÊµãËØïÂå∫Âüü
            const hollandElement = document.getElementById('hollandTest');
            if (hollandElement) {
                hollandElement.style.display = 'none';
            }
            
            // ÊòæÁ§∫ÈúçÂÖ∞Âæ∑ÂàÜÊûêÁªìÊûú
            const resultSection = document.getElementById('result');
            const resultContent = document.getElementById('resultContent');
            
            const { hollandCode, scores, primaryTypes, analysis } = data;
            
            // Á±ªÂûãÂêçÁß∞Êò†Â∞Ñ
            const typeNames = {
                R: 'Áé∞ÂÆûÂûã', I: 'Á†îÁ©∂Âûã', A: 'Ëâ∫ÊúØÂûã',
                S: 'Á§æ‰ºöÂûã', E: '‰ºÅ‰∏öÂûã', C: 'Â∏∏ËßÑÂûã'
            };
            
            let hollandHtml = `
                <div class="result-content">
                    <h4>üéØ ÈúçÂÖ∞Âæ∑ËÅå‰∏öÂÖ¥Ë∂£ÊµãËØïÁªìÊûú</h4>
                    <p><strong>ÊÇ®ÁöÑÈúçÂÖ∞Âæ∑‰ª£Á†ÅÔºö</strong>${hollandCode}</p>
                    <p><strong>‰∏ªË¶ÅÁ±ªÂûãÔºö</strong>${typeNames[primaryTypes[0].type]} (${primaryTypes[0].type}Âûã)</p>
                    <p><strong>‰∏ªË¶ÅÂæóÂàÜÔºö</strong>${primaryTypes[0].score}ÂàÜ</p>
                </div>

                <div class="result-content">
                    <h4>üìä ÂêÑÁª¥Â∫¶ÂæóÂàÜËØ¶ÊÉÖ</h4>
                    <div class="holland-scores">
                        ${Object.entries(scores).map(([type, score]) => `
                            <div class="score-item">
                                <span class="score-label">${typeNames[type]}(${type})</span>
                                <div class="score-bar">
                                    <div class="score-fill" style="width: ${(score / 20) * 100}%"></div>
                                </div>
                                <span class="score-value">${score}ÂàÜ</span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="result-content">
                    <h4>ü§ñ DeepSeek AI ÈúçÂÖ∞Âæ∑ÂàÜÊûê</h4>
                    <div class="analysis-content">
                        ${formatAnalysisContent(analysis.content)}
                    </div>
                    <p class="analysis-meta">
                        <small>ÂàÜÊûêÊ®°Âûã: ${analysis.model} | ÂàÜÊûêÊó∂Èó¥: ${new Date(analysis.timestamp).toLocaleString()}</small>
                    </p>
                </div>

                <div class="result-content" style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); color: white;">
                    <h4>üí° ÂèåÈáçÂàÜÊûêÊÄªÁªì</h4>
                    <p>ÊÇ®Â∑≤ÂÆåÊàêÁ¥´ÂæÆÊñóÊï∞ÂíåÈúçÂÖ∞Âæ∑ÊµãËØïÁöÑÂèåÈáçÂàÜÊûêÔºÅ</p>
                    <p><strong>Âª∫ËÆÆÊÇ®Ôºö</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>ÂØπÊØî‰∏§ÁßçÂàÜÊûêÊñπÊ≥ïÁöÑÂÖ±ÂêåÊé®Ëçê</li>
                        <li>ÈáçÁÇπÂÖ≥Ê≥®ÈáçÂ§çÂá∫Áé∞ÁöÑ‰∏ì‰∏öÊñπÂêë</li>
                        <li>ÁªìÂêà‰∏™‰∫∫ÂÆûÈôÖÊÉÖÂÜµÁªºÂêàËÄÉËôë</li>
                        <li>ÂèØ‰øùÂ≠òÊ≠§ÂàÜÊûê‰Ωú‰∏∫ÂçáÂ≠¶ÂèÇËÄÉ</li>
                    </ul>
                </div>
            `;
            
            // ÂêàÂπ∂‰πãÂâçÁöÑÁ¥´ÂæÆÂàÜÊûêÁªìÊûú
            const currentContent = resultContent.innerHTML;
            resultContent.innerHTML = currentContent + hollandHtml;
            
            resultSection.style.display = 'block';
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        // ÊòæÁ§∫ÁªºÂêàÂàÜÊûêÁªìÊûú
        function displayCombinedAnalysis(data) {
            hideLoading();
            
            // ÈöêËóèÈúçÂÖ∞Âæ∑ÊµãËØïÂå∫Âüü
            const hollandElement = document.getElementById('hollandTest');
            if (hollandElement) {
                hollandElement.style.display = 'none';
            }
            
            // ÊòæÁ§∫ÁªºÂêàÂàÜÊûêÁªìÊûú
            const resultSection = document.getElementById('result');
            const resultContent = document.getElementById('resultContent');
            
            const { userInfo, ziweiAnalysis, hollandResult, combinedAnalysis } = data;
            
            let html = `
                <div class="result-content">
                    <h4>üéâ ÁªºÂêàÂàÜÊûêÂÆåÊàê</h4>
                    <p><strong>ÂàÜÊûêÂØπË±°Ôºö</strong>${userInfo.name} (${userInfo.gender})</p>
                    <p><strong>ÂàÜÊûêÊñπÊ≥ïÔºö</strong>Á¥´ÂæÆÊñóÊï∞ + ÈúçÂÖ∞Âæ∑ËÅå‰∏öÂÖ¥Ë∂£ÊµãËØï</p>
                    <p><strong>ÂàÜÊûêÊó∂Èó¥Ôºö</strong>${new Date(data.timestamp).toLocaleString()}</p>
                </div>

                <div class="result-content">
                    <h4>üîÆ Á¥´ÂæÆÊñóÊï∞ÂàÜÊûêÊëòË¶Å</h4>
                    <p><strong>ÂëΩ‰∏ªÔºö</strong>${userInfo.soul} | <strong>Ë∫´‰∏ªÔºö</strong>${userInfo.body}</p>
                    <p><strong>‰∫îË°åÂ±ÄÔºö</strong>${userInfo.fiveElementsClass}</p>
                    <p><strong>ÁîüËæ∞ÂÖ´Â≠óÔºö</strong>${userInfo.chineseDate}</p>
                </div>

                <div class="result-content">
                    <h4>üéØ ÈúçÂÖ∞Âæ∑ÊµãËØïÁªìÊûú</h4>
                    <p><strong>‰∏ªË¶ÅÁ±ªÂûãÔºö</strong>${hollandResult.primaryTypeName} (${hollandResult.primaryType}Âûã)</p>
                    <p><strong>ÈúçÂÖ∞Âæ∑‰ª£Á†ÅÔºö</strong>${hollandResult.hollandCode}</p>
                    <p><strong>ÂæóÂàÜÔºö</strong>${hollandResult.primaryScore}ÂàÜ</p>
                    
                    <h5>üèÜ Ââç‰∏âÁ±ªÂûãÂæóÂàÜÔºö</h5>
                    <div class="recommendations">
                        ${hollandResult.topThreeTypes.map((type, index) => `
                            <div class="recommendation-card">
                                <h6>${index + 1}. ${type.name} (${type.type}Âûã)</h6>
                                <p><strong>ÂæóÂàÜÔºö</strong>${type.score}ÂàÜ (${type.percentage}%)</p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="result-content">
                    <h4>ü§ñ DeepSeek AI ÁªºÂêàÂàÜÊûê</h4>
                    <div class="analysis-content">
                        ${formatAnalysisContent(combinedAnalysis.content)}
                    </div>
                    <p class="analysis-meta">
                        <small>ÂàÜÊûêÊ®°Âûã: ${combinedAnalysis.model} | ÂàÜÊûêÊó∂Èó¥: ${new Date(combinedAnalysis.timestamp).toLocaleString()}</small>
                    </p>
                </div>

                <div class="result-content" style="background: linear-gradient(135deg, #00b894 0%, #00a085 100%); color: white;">
                    <h4>‚ú® ÂàÜÊûêÊÄªÁªì</h4>
                    <p>Êú¨Ê¨°ÂàÜÊûêÁªìÂêà‰∫Ü‰∏≠Âçé‰º†ÁªüÁ¥´ÂæÆÊñóÊï∞ÂíåÁé∞‰ª£ÂøÉÁêÜÂ≠¶ÈúçÂÖ∞Âæ∑ÁêÜËÆ∫Ôºå‰∏∫ÊÇ®Êèê‰æõ‰∫ÜÂÖ®Èù¢ÁöÑ‰∏ì‰∏öÈÄâÊã©Âª∫ËÆÆ„ÄÇ</p>
                    <p><strong>Âª∫ËÆÆÊÇ®Ôºö</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>ÈáçÁÇπÂÖ≥Ê≥®‰∏§ÁßçÂàÜÊûêÊñπÊ≥ïÈÉΩÊé®ËçêÁöÑ‰∏ì‰∏ö</li>
                        <li>ÁªìÂêà‰∏™‰∫∫ÂÖ¥Ë∂£ÂíåÂÆûÈôÖÊÉÖÂÜµÂÅöÊúÄÁªàÂÜ≥ÂÆö</li>
                        <li>ÂèØ‰ª•Â∞ÜÊ≠§ÂàÜÊûê‰Ωú‰∏∫‰∏ì‰∏öÈÄâÊã©ÁöÑÈáçË¶ÅÂèÇËÄÉ</li>
                        <li>Âª∫ËÆÆ‰∏é‰∏ì‰∏öÁöÑÂçáÂ≠¶ÊåáÂØºËÄÅÂ∏àËøõ‰∏ÄÊ≠•ËÆ®ËÆ∫</li>
                    </ul>
                </div>
            `;
            
            resultContent.innerHTML = html;
            resultSection.style.display = 'block';
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàê
        document.addEventListener('DOMContentLoaded', function() {

            // ÁªëÂÆöË°®ÂçïÊèê‰∫§‰∫ã‰ª∂
            const analysisForm = document.getElementById('analysisForm');
            if (analysisForm) {
                analysisForm.addEventListener('submit', handleFormSubmit);
            }

            // ÁªëÂÆöÂá∫ÁîüÊó∂Ëæ∞ÈÄâÊã©‰∫ã‰ª∂
            const birthTimeSelect = document.getElementById('birthTime');
            if (birthTimeSelect) {
                birthTimeSelect.addEventListener('change', handleBirthTimeChange);
            }

            // ÁªëÂÆöÈúçÂÖ∞Âæ∑ÊµãËØïÊåâÈíÆ‰∫ã‰ª∂
            const startHollandBtn = document.getElementById('startHollandBtn');
            if (startHollandBtn) {
                startHollandBtn.addEventListener('click', startHollandTest);
            }
        });
    </script>
</body>
</html>
